<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives | Viyu</title>
  <meta name="author" content="Viyu">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Viyu"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Viyu" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Viyu</a></h1>
  <h2><a href="/">Viyu's Blog</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">Archives</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-15T00:00:00.000Z"><a href="/2013/12/15/2013-12-15-lednoti/">Dec 15 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/15/2013-12-15-lednoti/">LED notification in Android device</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Code can control the LED notification in Android device, using android.app.Notification:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>notification = new Notification()<span class="comment">;  </span>
notification<span class="preprocessor">.flags</span> = Notification<span class="preprocessor">.FLAG</span>_SHOW_LIGHTS<span class="comment">;  </span>
  
notification<span class="preprocessor">.ledARGB</span> = ledColor<span class="comment">;  </span>
notification<span class="preprocessor">.ledOffMS</span> = <span class="number">200</span><span class="comment">;  </span>
notification<span class="preprocessor">.ledOnMS</span> = <span class="number">500</span><span class="comment">;  </span>
  
notificationManager<span class="preprocessor">.notify</span>(<span class="number">0</span>, notification)<span class="comment">;  </span>
</pre></td></tr></table></figure>


<p>ledARGB: The color of the led. The hardware will do its best approximation.</p>
<p>ledOffMS: The number of milliseconds for the LED to be off while it&#39;s flashing. The hardware will do its best approximation.</p>
<p>ledOnMS: The number of milliseconds for the LED to be on while it&#39;s flashing. The hardware will do its best approximation.</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/12/15/2013-12-15-lednoti/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-10T00:00:00.000Z"><a href="/2013/12/10/2013-12-10-tiletextureimage/">Dec 10 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/10/2013-12-10-tiletextureimage/">How to tile small texture image onto page as its background</a></h1>
  

    </header>
    <div class="entry">
      
        <p>You don’t need to set a big size image as the background of pages if the image is texture or uniform color.</p>
<p>How to tile small texture image onto big page/area as its background?</p>
<p>First, define drawable xml in res/drawable,</p>
<p>bg_texture_image.xml:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version=”1.0″ encoding=”utf-8″?&gt;</span>  
<span class="tag">&lt;<span class="title">bitmap</span> <span class="attribute">xmlns:android</span>=<span class="value">”http:</span>//<span class="attribute">schemas.android.com</span>/<span class="attribute">apk</span>/<span class="attribute">res</span>/<span class="attribute">android</span>”  
      <span class="attribute">android:src</span>=<span class="value">”@drawable</span>/<span class="attribute">bg_image</span>”  
      <span class="attribute">android:tileMode</span>=<span class="value">”repeat”</span> /&gt;</span>  
</pre></td></tr></table></figure>


<p>Second, use it as the background,</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="symbol">android:</span>background=”<span class="variable">@drawable</span>/bg_texture_image”  
</pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-25T00:00:00.000Z"><a href="/2013/11/25/2013-11-25-TextViewwithanim/">Nov 25 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/11/25/2013-11-25-TextViewwithanim/">Implement a TextView with an animation in its left side</a></h1>
  

    </header>
    <div class="entry">
      
        <p>In my case, I want to write a TextView with an animation in its left side.</p>
<p>ImageView + TextView could work but it’s not frugal enough.</p>
<p>TextView with drawableLeft would be the best option.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">TextView</span>  
     … …  
     <span class="attribute">android:drawablePadding</span>=<span class="value">”10dip”</span>  
     <span class="attribute">android:drawableLeft</span>=<span class="value">”@drawable</span>/<span class="attribute">loadingicon</span>” /&gt;</span>  
</pre></td></tr></table></figure>


<p>But above implementation just show a icon in the left of TextView, not an animation.</p>
<p>How to show an animation instead of a icon?</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/11/25/2013-11-25-TextViewwithanim/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-20T00:00:00.000Z"><a href="/2013/11/20/2013-11-20-The Adapter of ListView/">Nov 20 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/11/20/2013-11-20-The Adapter of ListView/">The Adapter of ListView: Just adapt data to view, don’t do anything else</a></h1>
  

    </header>
    <div class="entry">
      
        <p>The design of SimpleAdapter is not good in my opinion.</p>
<p>An adapter should just adapter the data to view, not care to inflate xml to create Layout View, hold the member Views of the layout view, and, fill the datas to each member View one by one. SimpleAdapter does these things all together. It is high coupling design.</p>
<p>The solution is a ItemViewHolder class, which inflate and hold the layout view and its member views, and parse datas to fill them  to member views one by one. And the most cool is, it’s layout view of ItemViewHolder set “this” as its tag. So that you can get the ItemViewHolder instance of the convertView in getView(…, View convertView, …) function.</p>
<p>See below code snippets.</p>
<p>In Adapter, passed in a List as data list.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>List<span class="tag">&lt;<span class="title">Data</span>&gt;</span> dataList;  
</pre></td></tr></table></figure>


<p>and override getView() like this:</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/11/20/2013-11-20-The Adapter of ListView/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-16T00:00:00.000Z"><a href="/2013/11/16/2013-11-16-shape plus selector/">Nov 16 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/11/16/2013-11-16-shape plus selector/">Shape + Selector: Make a Shape as one item of the Selector</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Generally, I use a selector to select pictures or colors to render the normal and the pressed background for View. </p>
<p>And use a Shape to draw a fixed background with border, round, gradient and other UI effect for View.</p>
<p>What if you wanna use them both for one View?</p>
<p>Make a Shape as one item of the Selector.</p>
<p>Selector selects background from Shape list.</p>
<p>Below is a sample.</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/11/16/2013-11-16-shape plus selector/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-10-18T00:00:00.000Z"><a href="/2013/10/18/2013-10-18-units issue/">Oct 18 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/10/18/2013-10-18-units issue/">Units Problem: How to read text size as custom attr from xml and set it to TextView in java code</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Here is this topic’s background:</p>
<p>I defined a custom View which extends FrameLayout and contains a TextView, calledMyView here. And I defined custom attribute “myviewtextsize” in attrs.xml for MyView so that clients can set different text size in layout xml for the TextView of MyView.</p>
<p>So far, clients code can set text size like this:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">MyView</span>  
     <span class="attribute">android:</span>…  
     …
     <span class="attribute">my:myviewtextsize</span>=<span class="value">”@dimen</span>/<span class="attribute">textsize_24</span>″  
     …  
/&gt;</span> 
</pre></td></tr></table></figure>


<p>The problem is: how to read the client’s text size number and set it to the TextVew of MyView?</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/10/18/2013-10-18-units issue/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-12-10T00:00:00.000Z"><a href="/2012/12/10/2012-12-10-startandroid/">Dec 10 2012</a></time>
      
      
  
    <h1 class="title"><a href="/2012/12/10/2012-12-10-startandroid/">Android初学笔记</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Eclipse 【ADT】 源</p>
<p><a href="https://dl-ssl.google.com/android/eclipse" target="_blank">https://dl-ssl.google.com/android/eclipse</a></p>
<hr>
<p>Notice that no matter what scenario causes the activity to stop, the system always calls onPause() before calling onStop().</p>
<p>Although the onPause() method is called before onStop(), you should use onStop() to perform larger, more CPU intensive shut-down operations, such as writing information to a database.</p>
<p>the system calls onStart() both when it creates your activity and when it restarts the activity from the stopped state.</p>
<p>Resumed</p>
<p>In this state, the activity is in the foreground and the user can interact with it. (Also sometimes referred to as the “running” state.)</p>
<p>Paused</p>
<p>In this state, the activity is partially obscured by another activity—the other activity that‘s in the foreground is semi-transparent or doesn’t cover the entire screen. The paused activity does not receive user input and cannot execute any code. </p>
<p>Stopped</p>
<p>In this state, the activity is completely hidden and not visible to the user; it is considered to be in the background. While stopped, the activity instance and all its state information such as member variables is retained, but it cannot execute any code.</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/12/10/2012-12-10-startandroid/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2011-03-01T00:00:00.000Z"><a href="/2011/03/01/2011-03-01-multithread/">Mar 1 2011</a></time>
      
      
  
    <h1 class="title"><a href="/2011/03/01/2011-03-01-multithread/">并发和多线程</a></h1>
  

    </header>
    <div class="entry">
      
        <p><b>线程安全性的需求不一定来自于对线程的直接使用，而是来源于对比如Servlet这种框架的使用</B></p>
<p>无状态对象一定是线程安全的；有状态但是状态对象是线程安全的，比如是原子的，也是线程安全的。但如果有多个状态对象，则线程不安全，除非在一个原子操作中同时更新了所有状态对象。synchronized(obj){}就可以保证代码块的原子性。如果一个线程试图获取被另一个线程池有的锁，则该线程会阻塞；如果一个线程试图获取已经被自己池有的锁，“重入”机制使得该线程可以获取；</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Widget</span> {</span>

<span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> dosth() {
}

}

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Loggingwidget</span> <span class="keyword">extends</span> <span class="title">Widget</span> {</span>

<span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> dosth() {

System.out.println(<span class="string">"do sth"</span>);

<span class="keyword">super</span>.dosht();

}
}
</pre></td></tr></table></figure>


<hr>
<p><b>某个线程获得对象的锁之后，只能阻止其他线程获得同一个锁，并不能阻止其他线程通过另外的锁来访问对象的变量</b></p>
<p>每个可变或共享的变量都该由同一个锁来保护；</p>
<p>简单粗暴的全部synchronized会使得并发程序变成串行程序，影响性能，多核CPU会有空载运行，应该缩小同步块的大小，将不影响共享状态并且执行时间较长的操作从同步代码块中分离出去。</p>
<p>简单性（对整个方法同步）与并发性（对尽可能短的代码路径进行同步）之间的平衡；</p>
<p>当执行较长时间或无法快速完成的操作时，比如网络I/O，一定不要持有锁，不然会影响活跃性和性能。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/01/2011-03-01-multithread/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-03-06T00:00:00.000Z"><a href="/2010/03/06/2010-03-06-fx/">Mar 6 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/03/06/2010-03-06-fx/">泛型：有限通配符的用法</a></h1>
  

    </header>
    <div class="entry">
      
        <p>发送一个子类对象给声明了其父类类型的方法，是没问题的；</p>
<p>但是发送一个子类对象List给声明了其父类类型List的方法，是不行的；</p>
<p>这个时候，有限通配符就可以派上用场，在接受方法的声明中：List&lt;? extends E&gt; o;</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre>{      
  Stack<span class="tag">&lt;<span class="title">One</span>&gt;</span> stack = new Stack<span class="tag">&lt;<span class="title">One</span>&gt;</span>();

  stack.pushSingle(new One());

  stack.pushSingle(new Two());

  List<span class="tag">&lt;<span class="title">One</span>&gt;</span> arrayList = new ArrayList<span class="tag">&lt;<span class="title">One</span>&gt;</span>();

  stack.push(arrayList);

  //有限通配符的用法

  List<span class="tag">&lt;<span class="title">Two</span>&gt;</span> list = new ArrayList<span class="tag">&lt;<span class="title">Two</span>&gt;</span>();

  stack.push(list); //The method push(List<span class="tag">&lt;<span class="title">One</span>&gt;</span>) in the type Stack<span class="tag">&lt;<span class="title">One</span>&gt;</span> is not applicable for the arguments (List<span class="tag">&lt;<span class="title">Two</span>&gt;</span>)

  stack.push2(list);
}
</pre></td></tr></table></figure>



      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/03/06/2010-03-06-fx/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-02-05T00:00:00.000Z"><a href="/2010/02/05/2010-02-05-sort/">Feb 5 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/02/05/2010-02-05-sort/">排序</a></h1>
  

    </header>
    <div class="entry">
      
        <p><b>【选择排序】</b></p>
<p>a[i++] —&gt; a[n]，从前往后看、选择最小值、一次交换到位</p>
<p>1，完整循环找到数组中最小的元素；</p>
<p>2，把这个最小的元素与a[0]交换；</p>
<p>3，在a[i]-a[n](i = 1, 2, … n)的子数组中重复1-2步骤；</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="function"><span class="title">for</span><span class="params">(int i = <span class="number">0</span>; i &lt; n; i++)</span> {

    <span class="title">int</span> <span class="title">min</span> = <span class="title">i</span>;

    <span class="title">for</span><span class="params">(int j = i + <span class="number">1</span>; j &lt; n; j++)</span> {

        <span class="title">if</span><span class="params">(a[j] &lt; min)</span> 

            <span class="title">min</span> = <span class="title">j</span>;

    }

    <span class="title">swap</span><span class="params">(i, j, a)</span>;
}
</pre></td></tr></table></figure>


<p>简写：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; n; i++) {
    <span class="built_in">min</span> = <span class="comment">//本次循环的i...n中的最小的元素的index；</span>

    <span class="comment">//将min和本次循环的i两个元素交换；</span>
}
</pre></td></tr></table></figure>



      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/02/05/2010-02-05-sort/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-01-05T00:00:00.000Z"><a href="/2010/01/05/2010-01-05-javavm/">Jan 5 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/01/05/2010-01-05-javavm/">Java VM学习笔记</a></h1>
  

    </header>
    <div class="entry">
      
        <p>局部变量表（虚拟机栈中的一部分）在编译期完成分配，运行期不会再改变大小；</p>
<p>每个方法对应一个栈帧（存储局部变量表、操作数栈、动态链接、方法出口等），栈帧被存储到虚拟机栈中，每个线程对应一个虚拟机栈，方法结束，栈帧生命周期结束，线程结束，虚拟机栈生命周期结束；</p>
<p>如果线程请求的虚拟机栈深度大于虚拟机所允许的深度，throw StackOverflowerror；</p>
<p>如果动态扩展时请求不到足够内存，throw OutOfMemoryError；</p>
<p>所有的对象实例以及数组都要在堆上分配（不绝对），堆是所有线程共享的，在虚拟机启动时创建，堆是垃圾回收的主要区域，GC堆；</p>
<p>Java虚拟机栈、本地方法栈、堆都等，除了程序计数器，其他内存区都会throw OutOfMemoryError；</p>
<p>堆物理上可以不连续，逻辑上是连续的；</p>
<p>方法区也是各个线程共享的，其中包括运行时常量池，类的描述以及常量都存放在这个池里；</p>
<p>直接内存常用于I/O库的操作；直接内存操作能提高性能，因为避免了Java堆和Native堆的数据复制；</p>
<hr>
<p>指针方式<br>句柄方式可以带来更大的伸缩性，对象被移动时reference的值不必被修改；</p>
<p>指针方式可以带来更高的访问性能，因为它节省了一次指针定位；</p>
<p>虚拟机用哪种方式是虚拟机自己实现的；</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/05/2010-01-05-javavm/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:mosthink.net">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Android/">Android</a><small>7</small></li>
  
    <li><a href="/tags/Concurrence/">Concurrence</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>2</small></li>
  
    <li><a href="/tags/Sort Algorithm/">Sort Algorithm</a><small>1</small></li>
  
  </ul>
</div>


  <div class="search">
  <a href="http://info.flagcounter.com/yHDb"><img src="http://s11.flagcounter.com/map/yHDb/size_s/txt_000000/border_CCCCCC/pageviews_0/viewers_0/flags_0/" alt="Flag Counter" border="0"></a>
</div>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 Viyu
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>