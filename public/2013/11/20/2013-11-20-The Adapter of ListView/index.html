<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>The Adapter of ListView: Just adapt data to view, don’t do anything else | Viyu</title>
  <meta name="author" content="Viyu">
  
  <meta name="description" content="The design of SimpleAdapter is not good in my opinion.
An adapter should just adapter the data to view, not care to inflate xml to create Layout View, hold the member Views of the layout view, and, fill the datas to each member View one by one. SimpleAdapter does these things all together. It is high coupling design.
The solution is a ItemViewHolder class, which inflate and hold the layout view and its member views, and parse datas to fill them  to member views one by one. And the most cool is, it’s layout view of ItemViewHolder set “this” as its tag. So that you can get the ItemViewHolder instance of the convertView in getView(…, View convertView, …) function.
See below code snippets.
In Adapter, passed in a List as data list.
1
List&lt;Data&gt; dataList;  



and override getView() like this:">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="The Adapter of ListView: Just adapt data to view, don’t do anything else"/>
  <meta property="og:site_name" content="Viyu"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Viyu" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Viyu</a></h1>
  <h2><a href="/">Viyu's Blog</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-11-20T00:00:00.000Z"><a href="/2013/11/20/2013-11-20-The Adapter of ListView/">Nov 20 2013</a></time>
      
      
  
    <h1 class="title">The Adapter of ListView: Just adapt data to view, don’t do anything else</h1>
  

    </header>
    <div class="entry">
      
        <p>The design of SimpleAdapter is not good in my opinion.</p>
<p>An adapter should just adapter the data to view, not care to inflate xml to create Layout View, hold the member Views of the layout view, and, fill the datas to each member View one by one. SimpleAdapter does these things all together. It is high coupling design.</p>
<p>The solution is a ItemViewHolder class, which inflate and hold the layout view and its member views, and parse datas to fill them  to member views one by one. And the most cool is, it’s layout view of ItemViewHolder set “this” as its tag. So that you can get the ItemViewHolder instance of the convertView in getView(…, View convertView, …) function.</p>
<p>See below code snippets.</p>
<p>In Adapter, passed in a List as data list.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>List<span class="tag">&lt;<span class="title">Data</span>&gt;</span> dataList;  
</pre></td></tr></table></figure>


<p>and override getView() like this:</p>
<a id="more"></a>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    ItemViewHolder item = null<span class="comment">;  </span>
  
    if(convertView == null) {  
        item = new ItemViewHolder(context)<span class="comment">;  </span>
        convertView = item<span class="preprocessor">.getLayoutView</span>()<span class="comment">;  </span>
    } else {  
        item = (ItemViewHolder)convertView<span class="preprocessor">.getTag</span>()<span class="comment">;  </span>
    }  
  
    item<span class="preprocessor">.setItemData</span>(dataList<span class="preprocessor">.get</span>(position))<span class="comment">;  </span>
  
    return convertView<span class="comment">;  </span>
}  
</pre></td></tr></table></figure>


<p>ItemViewHolder is the views holder of the convertView.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="code"><pre><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="id">ItemViewHolder</span> {</span>  
  
    <span class="comment">//The layout View of the item of the ListView.  </span>
    <span class="keyword">private</span> View layoutView = null;  
    <span class="comment">//The member Views to display data.  </span>
    <span class="keyword">private</span> TextView textView = null;  
    <span class="keyword">private</span> ImageView imageView = null;  
    … …  
  
    <span class="keyword">public</span> ItemViewHolder (Context context) {  
        <span class="keyword">super</span>(context);  
  
         initUI();  
    }  
  
    <span class="keyword">public</span> View getLayoutView() {  
        <span class="keyword">return</span> layoutView;  
    }  
  
    <span class="keyword">public</span> <span class="keyword">void</span> setItemData(Data data) {  
        textView<span class="variable">.setText</span>(data<span class="variable">.getText</span>());  
        imageView<span class="variable">.setImage</span>(data<span class="variable">.getImage</span>());  
        … …  
    }  
  
    <span class="keyword">private</span> <span class="keyword">void</span> initUI() {  
         LayoutInflater inflater = LayoutInflater<span class="variable">.from</span>(mContext);  
         layoutView = inflater<span class="variable">.inflate</span>(R<span class="variable">.layout</span><span class="variable">.item_view_layout</span>, null);  
        <span class="comment">//  </span>
        textView = (TextView) layoutView<span class="variable">.findViewById</span>(R<span class="variable">.id</span><span class="variable">.textview</span>);  
        imageView = (ImageView)layoutView<span class="variable">.findViewById</span>(R<span class="variable">.id</span><span class="variable">.imageview</span>);  
       <span class="comment">//This is the most important code.  </span>
       layoutView<span class="variable">.setTag</span>(<span class="keyword">this</span>);  
    }  
}  
</pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/Android/">Android</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://mosthink.net/2013/11/20/2013-11-20-The Adapter of ListView/" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:mosthink.net">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Android/">Android</a><small>7</small></li>
  
    <li><a href="/tags/Concurrence/">Concurrence</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>2</small></li>
  
    <li><a href="/tags/Sort Algorithm/">Sort Algorithm</a><small>1</small></li>
  
  </ul>
</div>


  <div class="search">
  <a href="http://info.flagcounter.com/yHDb"><img src="http://s11.flagcounter.com/map/yHDb/size_s/txt_000000/border_CCCCCC/pageviews_0/viewers_0/flags_0/" alt="Flag Counter" border="0"></a>
</div>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 Viyu
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>